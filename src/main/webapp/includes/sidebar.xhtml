<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html">


	<p:contextMenu id="projectMenu" for="treeRoot" nodeType="project">
		<p:menuitem value="Open/Close Project" actionListener="#{treeController.openCloseProject}" update=":navigatorForm:treeRoot :navigatorForm:projectMenu" />
	</p:contextMenu>

	<p:contextMenu id="nodeContextMenu" for="treeRoot" nodeType="document">
		<p:menuitem value="Open" url="#{treeController.uri}" icon="ui-icon-pencil" />
	</p:contextMenu>


	<p:tree id="treeRoot" value="#{treeController.root}" var="node" rendered="#{authUser.loggedIn}" selectionMode="single" selection="#{treeController.selectedNode}" dynamic="true" animate="true" style="height:100%;width:99%;border:none">
		<p:ajax event="select" update=":navigatorForm:treeRoot" />
		<p:ajax event="select" listener="#{treeController.onNodeSelect}" />
		<p:ajax event="expand" listener="#{treeController.onNodeExpand}" />
		<p:ajax event="collapse" listener="#{treeController.onNodeCollapse}" />

 <p:treeNode>
            <h:outputText value="#{node}" />
        </p:treeNode>

		<p:treeNode expandedIcon="ui-icon ui-icon-folder-open" collapsedIcon="ui-icon ui-icon-folder-collapsed">
			<h:link value="#{node.name}" outcome="#{node.uri}" style="font-size: 0.95em;" disabled="#{not node.selectable}">
				<f:param name="id" value="#{node.id}" />
				<p:ajax update=":navigatorForm:treeRoot" />
			</h:link>
		</p:treeNode>


		<p:treeNode type="useCases" icon="ui-icon ui-icon-document">
			<h:link value="#{node.name}" outcome="#{node.uri}" style="font-size: 0.95em;">
				<f:param name="id" value="#{node.id}" />
				<p:ajax update=":navigatorForm:treeRoot" />
			</h:link>
		</p:treeNode>

		<p:treeNode type="testSets" icon="ui-icon ui-icon-document">
			<h:link value="#{node.name}" outcome="#{node.uri}" style="font-size: 0.95em;">
				<f:param name="id" value="#{node.id}" />
				<p:ajax update=":navigatorForm:treeRoot" />
			</h:link>
		</p:treeNode>

		<p:treeNode type="document" icon="ui-icon ui-icon-document">
			<h:link value="#{node.name}" outcome="#{node.uri}" style="font-size: 0.95em;">
				<f:param name="id" value="#{node.id}" />
				<p:ajax update=":navigatorForm:treeRoot" />
			</h:link>
		</p:treeNode>

		<p:treeNode type="project" icon="ui-icon ui-icon-document">
			<h:link value="#{node.name}" outcome="#{node.uri}" style="font-size: 0.95em;" disabled="#{not node.selectable}">
				<f:param name="id" value="#{node.id}" />
				<p:ajax update=":navigatorForm:treeRoot" />
			</h:link>
		</p:treeNode>
	</p:tree>

</ui:composition>